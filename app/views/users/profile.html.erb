<head>
  <style type="text/css">
    h1 {
        color: black;
        text-align:center;
    }

    p {
        color: black;
        text-align: center;
        font-family: "Times New Roman";
    }
    li {
        color: gray;
        /*text-align: center;*/
        /*font-family: "Times New Roman";*/
    }

  </style>
</head>
<!--<div style="margin:0px; padding:0px; width:100%;">-->
<!--  <div class="row" style="margin:0px; width:100%; height:550px; overflow:hidden; background-image: url('doctor_male.jpeg'); background-size:cover;">-->
<!--  </div>-->
<!--</div>-->

<% if @user.role == "doctor" %>
  <h1>Doctor Profile</h1>
  <% if @user.gender == "Male" %>
    <div align="center">
      <img src="<%= asset_path('doctor_male.jpeg') %>" width="100" height="100"  alt=""/>
    </div>
  <% elsif @user.gender == "Female" %>
    <div align="center">
      <img src="<%= asset_path('doctor_female.jpeg') %>" width="100" height="100"  alt=""/>
    </div>
  <% else %>
    <div align="center">
      <img src="<%= asset_path('doctor_default.jpeg') %>" width="100" height="100"  alt=""/>
    </div>
  <% end %>

<% elsif @user.role == "patient" %>
  <h1>Patient Profile</h1>
  <% if @user.gender == "Male" %>
    <div align="center">
      <img src="<%= asset_path('patient_male.jpeg') %>" width="100" height="100"  alt=""/>
    </div>
  <% elsif @user.gender == "Female" %>
    <div align="center">
      <img src="<%= asset_path('patient_female.jpeg') %>" width="100" height="100"  alt=""/>
    </div>
  <% else %>
    <div align="center">
      <img src="<%= asset_path('patient_default.jpeg') %>" width="100" height="100"  alt=""/>
    </div>
  <% end %>

<% else %>
  <h1>Admin Profile</h1>
  <div align="center">
    <img src="<%= asset_path('admin.jpeg') %>" width="100" height="100"  alt=""/>
  </div>
<% end %>


<% flash.each do |name, msg| %>
  <% if msg.is_a?(String) %>
    <div class="alert alert-<%= name.to_s == 'notice' ? 'success' : 'danger' %>">
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
      <%= content_tag :div, msg, :id => "flash_#{name}" %>
    </div>
  <% end %>
<% end %>

<ul id="details">
  <li>
    Username:
    <%= @user.username %>
  </li>

  <li>
    Email:
    <%= @user.email %>
  </li>

  <li>
    Name:
    <%= "#{@user.first_name} #{@user.last_name}" %>
  </li>

  <li>
    Gender:
    <%= @user.gender %>
  </li>

  <li>
    Birthday:
    <%= @user.birthday.strftime("%B %d, %Y") %>
  </li>

  <% if @user.role == "patient" %>
    <% if @patient.med_record%>
      <li>
      <%= link_to 'Medical Record', "https://#{@patient.med_record}", target: :_blank%>
      </li>
    <% else %>
      <li class="action_needed">
      Medical Record: You can add a medical record in edit
      </li>
    <% end %>
  <% elsif @user.role == "doctor" %>
    <% if @doctor.department %>
      <li>
      Department:
      <%= @doctor.department %>
      </li>
    <% else %>
      <li class="action_needed">
        Department: You need to choose department in edit to let patients find you.
      </li>
    <% end %>

    <% if @schedules.length == 0 %>
      <li class="action_needed">
        Current Schedule: You need to set up your schedule to let patients book with you.
      </li>
    <% else %>
      <li>
      Current Schedule:
      <%= render "calendar_preview", schedules: @schedules %>
      </li>
    <% end %>
  <% end %>
</ul>

<div class="row">
  <%= link_to 'Edit Info', '/users/editinfo', :class => 'btn btn-primary col-2' %>
  <%= link_to 'Change Password or Delete', '/users/edit', :class => 'btn btn-danger col-2' %>
  <% if @user.role == "doctor" %>
    <%= link_to 'Set up / modify your schedule', '/schedules', :class => 'btn btn-primary col-2' %>
  <% end %>
</div>